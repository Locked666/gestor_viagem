{% extends "layouts/base.html" %}{%
block content %}
<div class="main w-auto h-auto min-vh-70">
    <div class="container ms-0 mt-4 justify-content-start w-100 h-100 ">
        <div class="row justify-content-start">
            <div class="col-12 col-md-4 mt-4 ms-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Relatórios Diárias</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">Relatório de Diárias por data ou competencia.</p>
                    </div>
                    <hr class="dark horizontal my-0">
                    <div class="card-footer text-muted">
                        <div class="col-md-3">
                            <button type="button" class="btn btn-primary w-full" id="bntPrintDaily" data-bs-toggle="modal" data-bs-target="#modal-filter" data-source="daily">
                                <i class="material-symbols-rounded me-2">print</i> 
                                Filtrar 
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!--<div class="col-12 col-md-4 mt-4 ms-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Relatórios Viagens</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">Relatório de Viagens por data ou competencia.</p>
                    </div>
                    <hr class="dark horizontal my-0">
                    <div class="card-footer text-muted">
                        <div class="col-md-3">
                            <button type="button" class="btn btn-primary w-full" id="bntPrintDaily" data-bs-toggle="modal" data-bs-target="#modal-filter" data-source="travels">
                                <i class="material-symbols-rounded me-2">print</i> 
                                Filtrar 
                            </button>
                        </div>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
    


    <div class="modal fade" id="modal-filter" tabindex="-1" aria-labelledby="modalFilterLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Filtros</h1>
                    
                    <button type="button" class="btn-close text-dark" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                {% set cm = current_month|default(0)|int %}
                <div class="modal-body">
                    <h3 class="fs-5 text-danger text-capitalize" id="infoModal" hidden="true" >teste</h3>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="filtroCompetencia" class="form-label">Competencia </label>
                            <select class="form-select border ps-1" id="filtroCompetencias">
                                <option value="0" {{ 'selected' if cm == 0 else '' }}>Todos</option>
                                <option value="1" {{ 'selected' if cm == 1 else '' }}>Janeiro</option>
                                <option value="2" {{ 'selected' if cm == 2 else '' }}>Fevereiro</option>
                                <option value="3" {{ 'selected' if cm == 3 else '' }}>Março</option>
                                <option value="4" {{ 'selected' if cm == 4 else '' }}>Abril</option>
                                <option value="5" {{ 'selected' if cm == 5 else '' }}>Maio</option>
                                <option value="6" {{ 'selected' if cm == 6 else '' }}>Junho</option>
                                <option value="7" {{ 'selected' if cm == 7 else '' }}>Julho</option>
                                <option value="8" {{ 'selected' if cm == 8 else '' }}>Agosto</option>
                                <option value="9" {{ 'selected' if cm == 9 else '' }}>Setembro</option>
                                <option value="10" {{ 'selected' if cm == 10 else '' }}>Outubro</option>
                                <option value="11" {{ 'selected' if cm == 11 else '' }}>Novembro</option>
                                <option value="12" {{ 'selected' if cm == 12 else '' }}>Dezembro</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <label for="filtroDataInicio" class="form-label">Data Inicio</label>
                            <input type="date" class="form-control border ps-1" id="filtroDataInicio">
                        </div>

                        <div class="col-md-4">
                            <label for="filtroDataFim" class="form-label">Data Fim</label>
                            <input type="date" class="form-control border ps-1" id="filtroDataFim">
                        </div>
                    </div>

                    {% if current_user.admin %}
                    <div class = "row mt-3">
                        <div class="col-md-6">
                            <label for="filtroUser" class="form-label" title="Quando se é administrador, pode emitir para outros usuários">
                                Técnico </label>
                            <select class="form-select border ps-1" id="filtroUser">
                                {% for user in users_daily%}
                                <option value="{{user.id}}" {{'selected' if current_user.id == user.id else '' }}>{{user.username}}</option>
                                {% endfor %}
                            </select>
                        </div>
                

                    </div>
                    {% endif %}

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="bntImprimirModal">Imprimir</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    

                </div>
            </div>
        </div>


    </div>

    <!-- Modal HTML -->
    <div class="modal fade" id="reportModal" tabindex="-1" aria-labelledby="reportModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="reportModalLabel">Relatório</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body" id="modalReportContent">
            <!-- O conteúdo HTML será inserido aqui -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id='bntPrintReport'>Imprimir</button>
            <button type="button" class="btn btn-primary" id='bntSaveReport'>Salvar</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Fechar</button>
        </div>
        </div>
    </div>
    </div>


{% include  "includes/viewer-file.html"%}
</div>
{% include "includes/footer.html" %} 

{% block javascripts %}

<script
  type="module"
  src="{{ url_for('static', filename='/assets/js/application/useReportsTravel.js') }}"
></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

{% endblock javascripts %}{% endblock content%}
